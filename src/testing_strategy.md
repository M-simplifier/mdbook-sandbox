# Testing Strategy

## 例示テストとPBTの役割分担

- 例示テスト: 仕様のハイライト、回帰の防止、読みやすいドキュメントとして使う
- PBT: 境界条件や組み合わせ爆発を補完し、設計の穴を早期にあぶり出す

この教材では、最初は例示テストで最低限の方向性を示し、すぐにPBTを導入します。

## モデルベーステストの視点

vim-likeエディタのように状態を持つ対象には、モデルを用意するのが有効です。初期段階では「単純なテキスト操作モデル」を用い、後で本実装との差分を明確化します。

- モデルは単純で良い
- 本実装は現実的な最適化や型設計を受け持つ
- テストはモデルと本実装の一致を問う

## テストのレイヤ

1. 小さな関数の性質 (バッファ操作など)
2. コマンド適用の一貫性 (例: カーソルは常に範囲内)
3. モデルとの整合性 (モデルの結果と一致する)
4. 退行を防ぐシナリオテスト

このレイヤ構造により、PBTの診断がしやすくなり、失敗時にどこを直すべきか見通しがよくなります。
